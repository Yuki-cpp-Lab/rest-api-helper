# Custom registry
common --registry=https://raw.githubusercontent.com/Yuki-cpp-Lab/bazel-registry/main
common --registry=https://bcr.bazel.build

# Clang-tidy configuration
build:clang-tidy --aspects @bazel_clang_tidy//clang_tidy:clang_tidy.bzl%clang_tidy_aspect
build:clang-tidy --output_groups=report
build:clang-tidy --@bazel_clang_tidy//:clang_tidy_config=@build_utils//:clang_tidy_config
build:clang-tidy --@bazel_clang_tidy//:clang_tidy_executable=@llvm_toolchain//:clang-tidy

# Clang-format configuration
# Setting up clang-format and clang-tidy
build:clang-format-base --output_groups=report
build:clang-format-base --@bazel_clang_format//:config=@build_utils//:clang-format-config
build:clang-format-base --@bazel_clang_format//:binary=@llvm_toolchain//:clang-format


# Check-only mode
build:clang-format --config=clang-format-base \
    --aspects=@bazel_clang_format//:defs.bzl%check_aspect

# Fix mode
build:clang-format-fix --config=clang-format-base \
    --aspects=@bazel_clang_format//:defs.bzl%fix_aspect \
    --use_action_cache=false
